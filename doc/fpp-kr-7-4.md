## 7.4 감쇠 추세 기법
Holt의 선형 기법으로 얻은 예측은 미래에도 계속 일정한 (증가 또는 감소) 추세를 나타낸다. 지수적으로 증가하거나 감소하는 지수 추세 기법으로 얻은 예측은 더더욱 그렇다.

경험적인 증거에 비춰보면 이러한 기법들은 특별히 더 긴 예측 지평선에 대해 과도하게 예측하는 경향이 있다. 이러한 사실에 착안하여, Gardner와 McKenzie는 1985년에 미래 어느 시점에 추세를 평평하게 감쇠시키는 한 가지 매개변수를 도입하였다. 감쇠하는 추세를 포함하는 기법은 매우 성공적이라는 것이 증명되었으며, 자동으로 예측하는 일이 필요한 많은 시계열에 대해 거의 틀림없이 가장 인기있는 기법이라고 할 수 있다.


### 덧셈 감쇠 추세

평활 매개변수 $$\alpha$$와 $$\beta^{*}$$(Holt 기법처럼 0과 1 사이의 값인) 말고도, 이 기법에는 감쇠 매개변수 $$0 < \phi < 1$$도 있다. 

$$
\begin{align*}
\hat{y}_{t+h \vert t} & = l_{t} + ( \phi + \phi^{2} + \cdots + \phi^{h} ) b_{t} \\
l_{t} & = \alpha y_{t} + (1-\alpha)( l_{t-1} + \phi b_{t-1} ) \\
b_{t} & = \beta^{*} (l_{t} - l_{t-1} ) + (1-\beta^{*}) \phi b_{t-1}.
\end{align*}
$$

만약에 $$\phi = 1$$ 이면, 이 기법은 Holt의 선형 기법과 완전히 같다. 0과 1 사이의 값에 대해 $$\phi$$는 추세를 감쇠시켜서 미래 어떤 시점에 추세가 상수가 되도록 한다. 사실 어떠한 $$ 0 < \phi < 1 $$에 대해 $$h \to \infty $$에서 예측치가 $$ l_{T} + \phi b_{T} / (1-\phi) $$로 수렴한다. 이러한 효과에 의해 단기 예측은 추세를 나타내고 장기 예측은 상수가 된다.

이러한 평활식의 오차 보정 형태는

$$
\begin{align*}
l_{t} &= l_{t-1} + \phi b_{t-1} + \alpha e_{t} \\
b_{t} &= \phi b_{t-1} + \alpha \beta^{*} e_{t}.
\end{align*}
$$

### 예제 7.2 항공객(계속)
그림 7.3은 표본 내 한 단계 예측과 2005년부터 2010년까지의 예측치를 Holt의 선형 추세 기법, 지수 추세, 덧셈 감쇠 추세 기법으로 생성한 결과를 나타낸다. 지수 추세 기법이 가장 낙관적인 예측을 나타내고, 감쇠 추세 기법이 가장 덜 낙관적인 예측값을 주며, Holt의 선형 추세 기법은 그 둘 사이에 있다.


### 곱셈 감쇠 추세
덧셈 감쇠 추세 기법이 보여주는 예측력에서 착안하여, Taylor의 2003년 논문에서는 감쇠 매개변수를 지수 추세 기법에 도입하여 곱셈 감쇠 추세 기법을 얻었다.

$$
\begin{align*}
\hat{y}_{t+h \vert t} & = l_{t} b_{t} ^{ \phi + \phi^{2} + \cdots + \phi^{h} } \\
l_{t} & = \alpha y_{t} + (1-\alpha) l_{t-1} b_{t-1}^{\phi} \\ 
b_{t} & = \beta^{*} \frac{ l_{t} }{ l_{t-1} } + (1-\beta^{*})b_{t-1}^{\phi}.
\end{align*}
$$

이 기법은 Holt의 선형 기법과 비교했을 때 덧셈 감쇠 추세 기법보다 덜 보수적인 예측치를 준다. 평활식의 오차 보정 형태는 다음과 같다.

$$
\begin{align*}
l_{t} & = l_{t-1} b_{t-1}^{\phi} + \alpha e_{t} \\
b_{t} & = b_{t-1}^{\phi} + \alpha \beta^{*} \frac{e_{t}}{l_{t-1}}.
\end{align*}
$$

### 예제 7.3 아시아의 양 목축
이 예제에서 아시아 양 개체수 예측을 통해 지금까지 살펴본 모든 비-계절적 기법의 예측력을 비교한다. 데이터의 기간은 1970년부터 2005년까지이다. 2001년부터 2005년까지를 검증 구간, 2000년까지의 데이터를 훈련 데이터로 사용한다(검증과 훈련 집합의 정의는 2.5절을 참고하라). 그림 7.5는 데이터와 모든 기법에 대한 예측치이다.

모든 기법에 대해 매개변수와 초기값은 훈련 집합에 대해 SSE(구체적인 정의는 식 7.3을 참조)를 최소화하여 추정하였다. 표 7.4에 훈련 집합과 검증 집합에 대한 추정 결과와 오차 값을 나타내었다.

```R
livestock2 <- window(livestock,start=1970,end=2000)
fit1 <- ses(livestock2)
fit2 <- holt(livestock2)
fit3 <- holt(livestock2,exponential=TRUE)
fit4 <- holt(livestock2,damped=TRUE)
fit5 <- holt(livestock2,exponential=TRUE,damped=TRUE)

fit1$model  # 첫 번째 모델에 대한 결과:
accuracy(fit1) # 훈련 집합
accuracy(fit1,livestock) # 검증 집합
```

|  | SES | Holt | 지수 | 덧셈 | 곱셈 |
|--|-----|--------|-------------|----------|----------------|
| $$\alpha$$ | 1 | 0.98 | 0.98 | 0.99 | 0.98 |
| $$\beta^{*}$$ |  | 0 | 0 | 0 | 0.00 |
| $$\phi$$ |  |  |  | 0.98$$^{\dagger}$$ | 0.98 |
| $$l_{0}$$ | 263.92 | 257.78 | 255.52 | 254.58 | 254.69 |
| $$b_{0}$$ |  | 5.01 | 1.01 | 5.39 | 1.02 |
| RMSE | 14.77 | 13.92 | 14.06 | 14.00 | 14.03 |
| SSE | 6761.47 | 6006.06 | 6128.46 | 6080.26 | 6100.11 |
| MAE | 20.38 | 10.69 | 9.64 | 14.18 | 11.77 |
| RMSE | 25.46 | 11.88 | 12.50 | 15.78 | 12.62 |
| MAPE | 4.60 | 2.54 | 2.33 | 3.26 | 2.76 |
| MASE | 2.26 | 1.19 | 1.07 | 1.57 | 1.31 |

$$^{\dagger}$$ 이 매개변수는 $$ \phi \le 0.98 $$로 제한하였다. 자세한 내용은 본문을 보라.

단순 지수 평활 기법에 대해, 추정된 평활 매개변수는 $$ \alpha=1 $$이다. 시계열에 시간에 따른 분명한 추세가 있고, 이 추세를 감지하기 위해 단순 지수 평활에 가능한 가장 큰 조정이 필요하다. 다른 기법에도 추세 성분이 있다. 곱셈 감쇠 추세 기법을 제외하면, 기울기에 대한 평활 매개변수는 시간에 따라 변하지 않는 것을 의미하는 값인 0으로 추정딘다. 물론, 감쇠 추세 기법을 사용하여 추정한 추세는 감쇠 요소 때문에 미래에 변할 것이다.

그림 7.4에 Holt의 기법과 덧셈 감쇠 추세 기법에 대해 수준과 추세 성분을 나타내었다. Holt 기법에 대한 추세 성분의 기울기는 상수이다. 이것은 추세가 선형이라는 것을 보여준다. 반대로, 감쇠 추세 기법에 대한 추세 성분의 기울기는 감소하며, 이것은 추세가 수평을 유지하고 있다는 것을 보여준다.

![](https://www.otexts.org/sites/default/files/resize/fpp/images/fig_7_leveltrend-570x397.png)

그림 7.4: Holt의 선형 추세 기법과 덧셈 감쇠 추세 기법에 대한 수준과 기울기 성분.

```R
plot(fit2$model$state)
plot(fit4$model$state)
```

![](https://www.otexts.org/sites/default/files/resize/fpp/images/fig_7_comp-570x333.png)
그림 7.5: 아시아 양 목축 개체수 예측: 비-계절적 기법들의 예측력 비교.

```R
plot(fit3, type="o", ylab="Livestock, sheep in Asia (millions)", 
  flwd=1, plot.conf=FALSE)

lines(window(livestock,start=2001),type="o")


lines(fit1$mean,col=2)
lines(fit2$mean,col=3)
lines(fit4$mean,col=5)
lines(fit5$mean,col=6)

legend("topleft", lty=1, pch=1, col=1:6,
  c("Data","SES","Holt's","Exponential",
    "Additive Damped","Multiplicative Damped"))
```

덧셈 감쇠 추세 기법에 대해, 감쇠 매개변수 $$\phi$$는 최대값 0.98로 제한된다( $$ \phi=1 $$에 대한 추정 최적값 결과). 이러한 제한 조건은 덧셈 감쇠 추세 기법이 Holt의 선형 기법으로 얻은 예측과 비교할 때 현저하게 다른 예측치를 낼 수 있게 한다. 제한 조건을 무시한 경우에는 두 기법은 동일한 예측치를 낸다.

훈련 집합에 대해 계산한 SSE로, Holt의 선형 추세 기법이 덧셈 감쇠 추세 기법 다음으로 데이터를 가장 잘 맞추는 기법이라는 것을 알 수 있다. 단순 지수 평활은 가장 큰 표본 내 한 단계 오차를 생성한다. 그림 7.5에서는, 기법으로 생성한 예측치를 검토할 수 있다. 검증 집합을 아직 모른다고 생각하면, 특별히 데이터의 추세를 고려한 기법으로 얻은 모든 예측치가 꽤 그럴듯하다고 결론 내릴 수 있을 것 같다.

표 7.4의 검증 집합에 대해 기법의 예측력을 비교할 때, MAE, MAPE, 그리고 MASE에 따르면 지수 추세 모델이 가장 정확하고, RMSE에 따르면 Holt의 선형 기법이 가장 정확하다. 이렇게 상충되는 결과는 기법 사이의 예측력을 비교할 때 매우 흔한 일이다. 예측 작업은 다양한 차원(예측 수평선의 길이, 검증 집합의 크기, 예측 오차 측정 방법, 데이터의 빈도 등)에 의해 변할 수 있기 때문에, 한 기법이 모든 예측 시나리오에 대해 더 좋은 경우는 흔치 않다. 일관된 예측 결과를 내는 기법을 얻으려면 자주 검증해야만 한다.

