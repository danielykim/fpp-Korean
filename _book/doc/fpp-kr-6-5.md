## 6.5 STL 분해
STL은 아주 다양한 상황에서 사용할 수 있는 강력한 시계열 분해 기법이다. STL은 "Seasonal and Trend decomposition using Loess"의 약자이다. 여기에서 Loess는 비선형 관계를 추정하기 위한 기법이다. STL 방법은 Cleveland와 공동 연구자들이 개발하여 1990년에 발표한 방법이다.

STL은 고전적인 분해와 X-12-ARIMA를 뛰어넘는 몇 가지 장점을 가지고 있다.
* X-12-ARIMA와는 다르게, STL은 월별이나 4분기별 데이터를 포함하여 어떤 종류의 계절성도 다룰 수 있다.
* 계절적인 성분이 시간에 따라 변해도 괜찮다. 변화율을 사용자가 조절할 수 있다.
* 추세-주기의 매끄러운 정도를 사용자가 조절할 수 있다.
* 이상한 측정값이 있을 때 사용해도 안전하다. (즉, 사용자가 강력한 분해법을 명시할 수 있다.) 가끔 있는 특이한 관측값은 추세-주기와 계절적인 성분에 영향을 주지 않는다. 하지만, 나머지 성분에는 영향을 준다.

반면에, STL은 몇 가지 단점을 가지고 있다. 특별히 거래일이나 달력 변동을 자동으로 다루지 않으며 덧셈 분해만 지원한다.

데이터에 먼저 로그를 취하고 성분을 다시 원래대로 되돌리는 방식으로 곱셈 분해를 얻을 수 있다. $$ 0 < \lambda < 1 $$로 데이터의 Box-Cox 변환을 가지고 덧셈과 곱셈 사이의 분해를 얻을 수 있다. $$ \lambda = 0 $$은 곱셈 분해, $$ \lambda = 1 $$은 덧셈 분해와 같다.

몇 가지 설정과 함께 예제와 실험을 살펴보는 것이 STL 사용법을 익힐 때 가장 좋은 방법이다. 그림 6.3은 전자 장비 지수 데이터에 STL을 적용한 예이다. 그림 6.10은 추세가 더 유동적인 또 다른 STL 분해와 계절적인 성분이 시간에 따라서 변하지 않고, 안전한 옵션을 사용한 결과이다. 시계열의 끝에 감소 추세가 있다는 것과 2009년의 값이 특이하게 낮다는 것을 분명하게 알 수 있다(나머지 성분에서 큰 음수값 몇몇과 관계 있다).

![](https://www.otexts.org/sites/default/files/resize/fpp/images/elecequip_stl2-600x596.png)

그림 6.10: 전자 장비 지수(위)와 안전한 STL 분해로 얻은 유동적인 추세와 고정된 계절성을 가진 세 가지 덧셈 성분.

```R
fit <- stl(elecequip, t.window=15, s.window="periodic", robust=TRUE)
plot(fit)
```

STL을 사용하여 선택한 두 개의 주된 매개변수들은 추세 윈도우(t.window)와 계절적인 윈도우(s.window)이다. 이러한 매개변수들로 추세와 계절적인 성분이 급격하게 변할 수 있는지 조절할 수 있다. 값이 작으면 더 급격하게 변한다. 계절적인 윈도우를 무한대로 설정하면 계절적인 성분을 주기적으로 고정하는 것과 같다(즉, 매년 같게 두는 것).

6.4 X-12-ARIMA 분해   up   6.6 분해법으로 예측하기

[원문 보기](https://www.otexts.org/fpp/6/5)